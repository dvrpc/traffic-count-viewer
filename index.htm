<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="description" content="version 1.0.1">
        <meta name="author" content="Michael Ruane">     
        <title>DVRPC - Regional Traffic Counts</title>
        <link href="http://netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdn.datatables.net/1.10.8/css/dataTables.bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="lib/assets/jquery.nouislider.min.css">
        <link rel="stylesheet" href="lib/dvrpc.draw.css">       
        <link rel="stylesheet" href="lib/style.css" />
        <style>


        #loading, #noresults, #return-to-search {
          position: absolute;
          width: 220px;
          
          top: 50%;
          left: 50%;
          margin: -40px 0 0 -110px;
          z-index: 1028;
          text-align: center;
            }
        .omodal{
            position: absolute;
            width: 220px;
            height: 19px;
            top: 50%;
            left: 50%;
            margin: -10px 0 0 -110px;
            z-index: 1028;
            display: none;
            overflow: hidden;
            outline: 0px none;
        }
        .navbar-brand h3{
            margin:15px;
        }
        
        @media (max-width: 1270px) {
            .navbar .navbar-brand {
                font-size: 18px;
                float: left;
            }
            .leaflet-control-attribution {
                display: none;
            }
            
        }
        </style> 
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
            <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.2.0/respond.js"></script>
        <![endif]-->
    </head>

    <body>
        <div id="TC_header" class="navbar navbar-inverse navbar-top dk-gray-border oheader">
        <div class="navbar-header" >
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse dk-gray-border">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            <div class="navbar-brand">
                <!--  <span><a href="http://www.dvrpc.org/" target="_blank"><img class="title-logo" src="http://www.dvrpc.org/webmaps/img/dataportal/banner_logo.png" alt="DVRPC"/></a></span> -->
                <a class="navbar-brand" href="http://www.dvrpc.org" style="color:#428BCA;margin:6px 0px 0px 5px;"><img src="http://www.dvrpc.org/webmaps/pedbikecounts/img/dvrpc_tiny.png" height="40" style="margin:2px 0px 0px 5px;"/>   Regional Traffic Counts</a>
                
            </div>
        </div>
        <div id="navbar-links" class="navbar-collapse collapse">
            <ul id="landing" class="nav navbar-nav navbar-right">
                <li><a href="#about" class="toggleLanding" data-tab="about" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="$('#aboutModal').modal('show'); return false;"><i class="glyphicon glyphicon-home"></i>&nbsp;&nbsp;About</a></li>
                <li><a href="#about" class="toggleLanding" data-tab="about" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="$('#aboutModal').modal('show'); return false;"><i class="glyphicon glyphicon-question-sign"></i>&nbsp;&nbsp;Help</a></li>
            </ul>
        
        </div><!--/.navbar-collapse -->
        <div class="video-hero" >
            <div class="video-bg demo-video">
                <video id="hero-video" autoplay muted loop poster="lib/files/Street-View.jpg">
                    <source src="lib/files/Street-View.mp4" type="video/mp4">Your browser does not support mp4. I suggest you upgrade your browser.
                    <source src="lib/files/Street-View.webm" type="video/webm">Your browser does not support webm. I suggest you upgrade your browser.
                    <source src="lib/files/Street-View.ogv" type="video/ogg">
                </video>
                <!--<video autoplay muted loop poster="lib/files/blurred-traffic-crosswalk.jpg">
                    <source src="lib/files/blurred-traffic-crosswalk.mp4" type="video/mp4">Your browser does not support mp4. I suggest you upgrade your browser.
                    <source src="lib/files/blurred-traffic-crosswalk.webm" type="video/webm">Your browser does not support webm. I suggest you upgrade your browser.
                    <source src="lib/files/blurred-traffic-crosswalk.ogv" type="video/ogg">
                </video>-->
            </div>
            <div class="video-overlay"></div>
            <div class="page-width">
                <div class="video-hero--content">
                    <h2>DVRPC Travel Monitoring</h2>
                    <p>Counting a region in motion</p>
                </div>
            </div>
        </div> 
    </div>
        
    <!--Map and Sidebar-->
       <div class="row ocontent" id="container">
            
            <!---Map Pane -->
            <div id="landing_map" class="col-sm-12 col-lg-12">

                <div id="landingSearch" class="col-lg-8 center-block" style="float:none;">
                    <div class="row">
                        <form class="">
                            <div class="form-group">
                                <div class="col-lg-9">
                                    <label class="sr-only" for="userLocation">Amount (in dollars)</label>
                                    
                                      <input type="text" class="form-control input-lg" id="userQuery" placeholder="City, State or Zip">  
                                </div>
                                <div class="col-lg-3">
                                  <div id="homeLocSearch" class="col-lg-12 btn btn-primary btn-lg">Search</div>
                                </div>

                            </div>
                        </form>
                    </div>
                    <div class="row">
                        <div class="col-lg-3"><button id="aoiSearch" class="col-lg-12 btn btn-primary btn-lg" data-toggle="collapse" href="#aoi-draw">Draw your own<br/>Area of Interest</button></div>
                        <div class="col-lg-3"><a target="_new" href="http://arcgis.dvrpc.org/arcgis/rest/services/Transportation/TrafficCounts/MapServer"><button class="col-lg-12 btn btn-primary btn-lg">Access counts</br>as Service</button></a></div>
                        <div class="col-lg-3"><button id="count_num" onclick="$('#count-modal').modal('show'); return false;" class="col-lg-12 btn btn-primary btn-lg">Search counts <br/>by record number</button></div>
                    </div>
                </div>
                <ul id="results"><ul>
            </div>
            <div class="col-sm-6 col-lg-6 off-right" id="sidebarMirror"></div>
    
            </div>
        </div><!--end Map and Sidebar-->

        <div class="row dataEnvironment" id="appContainer">
            <div class="col-sm-12 col-lg-12" id="search-bar-container">
                <div id="search-bar-nav">
                    <form class="" id="map_query" name="map_query">
                        <div class="input-group">
                            <label class="sr-only" for="userLocation">Location query</label> <input class="form-control" data-provide="typeahead" id="mapQuery" placeholder="City, State or Zip" type="text"> <span class="search-form-icon"><i class="glyphicon glyphicon-search"></i></span>
                        </div>
                    </form>
                    <button id="doaSearch" class="btn btn-primary btn-md" data-toggle="collapse" href="#aoi-draw"><i class="glyphicon glyphicon-pencil"></i>&nbsp;&nbsp;Draw Search Area</button>
                  <!--   <button id="filterBtn" class="btn btn-primary accordion-toggle btn-md" data-toggle="collapse" href="#filter" ><i class="glyphicon glyphicon-filter"></i>&nbsp;&nbsp;<span id="preFilter">Show</span> Filters</button> -->
                    <!--    <button id="searchBtn" class="btn btn-primary accordion-toggle btn-md" data-toggle="collapse" href="#search" ><i class="glyphicon glyphicon-search"></i>&nbsp;&nbsp;Modify Search Area</button> -->
                    <button class="btn btn-primary accordion-toggle btn-md" id="records-by-number" onclick="$('#count-modal').modal('show'); return false;"><i class="glyphicon glyphicon-flash"></i>&nbsp;&nbsp;Search by Record #</button>
                  <!-- Start Type Dropdown-->
                    <div class="btn-group" id="count_types">
                        <button type="button" id="count_types_dropdown"class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="javascript:;"><i class="glyphicon glyphicon-road"></i>&nbsp;&nbsp;Count Types <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu keep-open-on-click">
                        <h5>Specify count types:</h5>
                            <button class="btn btn-default" data-layer="Volume" data-render="true" type="button" data-tooltip="tooltip"title="The automated measurement of traffic volume collected and presented in hourly increments."><i class="fa fa-circle ct-vol"></i>&nbsp;&nbsp;Volume</button> 
                            <button class="btn btn-default" data-layer="15 min Volume" data-render="true" type="button" data-tooltip="tooltip" title="The automated measurement of traffic volume collected in 15 min. increment and presented in hourly increments."><i class="fa fa-circle ct-15min" title="The automated measurement of traffic volume collected in 15 min. increment and presented in hourly increments."></i>&nbsp;&nbsp;15 Min Volume</button> 
                            <button class="btn btn-default" data-layer="Speed" data-render="true" type="button" data-tooltip="tooltip" title="Speed counts..still need this"><i class="fa fa-circle ct-speed"></i>&nbsp;&nbsp;Speed</button> 
                            <button class="btn btn-default" data-layer="Class" data-render="true" type="button" data-tooltip="tooltip" title="Automated measurement of traffic volume by vehicle class (type)."><i class="fa fa-circle ct-class"></i>&nbsp;&nbsp;Class</button> 
                            <button class="btn btn-default" data-layer="Manual Class" data-render="true" type="button" data-tooltip="tooltip" title="Manual observation and measurement of traffic volume by vehicle class (type)."><i class="fa fa-circle ct-mclass"></i>&nbsp;&nbsp;Manual Class</button> 
                            <button class="btn btn-default" data-layer="Turning Movement" data-render="true" type="button" data-tooltip="tooltip" title="Manual observation and measurement of intersection turning movement volumes."><i class="fa fa-circle ct-tm"></i>&nbsp;&nbsp;Turning Movement</button> 
                            <button class="btn btn-default" data-layer="Loop" data-render="true" type="button" data-tooltip="tooltip" title="Vehicle volume counts via fixed-location inductive-loop counters."><i class="fa fa-circle ct-loop"></i>&nbsp;&nbsp;Loop</button> 
                            <button class="btn btn-default" data-layer="8 Day" data-render="true" type="button" data-tooltip="tooltip" title="A week long volume count utilized by NJDOT."><i class="fa fa-circle ct-8day"></i>&nbsp;&nbsp;8 Day</button> 
                            <button class="btn btn-default" data-layer="Crosswalk" data-render="true" type="button" data-tooltip="tooltip" title="Manual observation and measurement of crosswalk movement by pedestrains and bicycles."><i class="fa fa-circle ct-cwalk"></i>&nbsp;&nbsp;Crosswalk</button>
                        </ul>
                    </div>
                  <!-- End Type Dropdown-->
                      <!-- Start Type Dropdown-->
                    <div class="btn-group" id="count_year">
                        <button type="button" id="count_year_dropdown"class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="javascript:;"><i class="glyphicon glyphicon-calendar"></i>&nbsp;&nbsp;Years <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                             <h5>Specify years of interest: <span class="years" id="yearMin"></span> - <span class="years" id="yearMax"></span></h5>
                            <div id="sliderWrap">
                            <div class="sliders" id="yearSlider"></div>
                        </div>
                        </ul>
                    </div>
                  <!-- End Type Dropdown-->
                   <button class="btn btn-success accordion-toggle" data-toggle="collapse" id="updateSearchbtn">Update Search</button>
                    <div style="clear:both;"></div>
                </div>
                <div class="collapse" id="search"><!-- start location query -->
                    <div id="filterWrapper">
                        <span>Search by location:</span>
                        <form class="" id="map_query" name="map_query">
                            <div class="input-group">
                                <label class="sr-only" for="userLocation">Location query</label> <input class="form-control" data-provide="typeahead" id="mapQuery" placeholder="City, State or Zip" type="text"> <span class="search-form-icon"><i class="glyphicon glyphicon-search"></i></span>
                            </div>
                        </form>
                        <div style="clear:both;"></div>
                    </div>
                </div><!-- end location query -->
            </div>

            <div id="mapDIV" class="col-md-5 col-lg-6 mapElement" style="opacity:0.0;">
                <div class="collapse fade" id="aoi-draw">
                    <div id="filterWrapper">
                        <div class="col-lg-12">
                            <div class="btn-group btn-group-sm" role="group">
                                <button id="draw-help" data-toggle="collapse" href="#aoi-help" type="button" class="btn btn-primary "><i class="glyphicon glyphicon-question-sign"></i></button>
                                <button id="delete-last" type="button" class="btn btn-warning "><i class="glyphicon glyphicon-repeat"></i>&nbsp;&nbsp;Undo last</button>
                                <button id="draw-cancel" type="button" class="btn btn-danger"><i class="glyphicon glyphicon-remove"></i>&nbsp;&nbsp;Cancel drawing</button>
                            </div>
                        </div>
                        
                        <div style="clear:both;"></div>
                    </div> 
                    <div id="aoi-help" class="collapse">
                        <p>Define your area of interest by drawing on the map the location for which you would like to search for counts. Click once to start drawing a polygon search area. To undo a point or clear the polygon use the buttons above. Double-click to close the search area.</p>
                    </div>
                </div>

                <div id="loading" class="panel panel-default">
                    <div class="panel-body">
                        <span>Loading search results...</span>
                        <div class="progress">
                            <div class="progress-bar progress-bar-warning progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                        
                            </div>
                        </div>
                    </div>
                </div>
                <div id="noresults" class="panel panel-danger" style="display:none;">
                    <div class="panel-heading"> <h3 class="panel-title"><i class="glyphicon glyphicon-exclamation-sign"></i>&nbsp;&nbsp;No counts found!</h3></div>
                    <div class="panel-body">
                        <p>No counts were found for your search criteria. Please modify the search area and/or filter criteria.</p>
                    </div>
                </div>
                <div id="return-to-search" class="panel panel-danger" style="display:none;">
                    <div class="panel-heading"> <h3 class="panel-title"><i class="glyphicon glyphicon-exclamation-sign"></i>&nbsp;&nbsp;No counts found!</h3></div>
                    <div class="panel-body">
                        <p>No counts were found for your search criteria. You may need to return to your search area.</p>
                        <button id="fit-search" type="button" class="btn btn-danger"><i class="glyphicon glyphicon-search"></i>&nbsp;&nbsp;Return to Search Area</button>
                    </div>
                </div>
            </div>
            <div class="col-md-7 col-lg-6 off-right" id="sidebar">
                <div id="results-panel" >
                    <table id="table" class="table table-striped table-bordered">
                        <!-- table content build here -->
                    </table>                            
                </div>
            </div>
        </div>

        <!--modal -->
        <div class="modal fade" id="aboutModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button aria-hidden="true" class="close" data-dismiss="modal" type="button">&times;</button>
                        <h4 style="color:white;">DVRPC - Traffic Counts</h4>
                    </div>
                    <div class="modal-body">
                        <div class="clearfix">
                            <ul class="nav nav-tabs" id="aboutTabs">
                                <li class="active">
                                    <a data-toggle="tab" href="#about"><i class=""></i>&nbsp;About</a>
                                </li>
                                <li>
                                    <a data-toggle="tab" href="#disclaimer"><i class="i"></i>&nbsp;Disclaimer</a>
                                </li>
                                <li>
                                    <a data-toggle="tab" href="#contact"><i class="icon-globe"></i>&nbsp;Contact</a>
                                </li>
                            </ul>
                            <div class="tab-content" id="aboutTabsContent" style="padding-top: 10px;">
                                <div class="tab-pane fade active in" id="about">
                                    <p>Traffic count data on this website is provided as a public service. The data item "Annual Average Daily Traffic (AADT)" represents an estimate of all traffic during a 24 hour period at the location indicated for the year in which it was collected. While every effort is made on the part of DVRPC to provide valid and current information, DVRPC makes no representation or warranties, express or implied, about the validity of this information and is not to be held responsible for errors in data obtained from this website.</p>
                                </div>
                                <div class="tab-pane fade text-danger" id="disclaimer">
                                    <p>This web page is a public resource of general information. The Delaware Valley Regional Commission (DVRPC) makes no warranty, representation, or guarantee as to the content, sequence, accuracy, timeliness, or completeness of any of the spatial data or database information provided herein. DVRPC and partner state, local, and other agencies shall assume no liability for errors, omissions, or inaccuracies in the information provided regardless of how caused; or any decision made or action taken or not taken by any person relying on any information or data furnished within.</p>
                                </div>
                                <div class="tab-pane fade" id="contact">
                                    <p><b>Office of Travel Monitoring</b><br>
                                    Scott Brady, Manager<br>
                                    (215) 238-2814<br>
                                    <a href="mailto:sbrady@dvrpc.org">sbrady@dvrpc.org</a><br>
                                    <br>
                                    Charles Henry, Traffic Counting Supervisor<br>
                                    (215) 238-2895<br>
                                    <a href="mailto:chenry@dvrpc.org">chenry@dvrpc.org</a><br>
                                    <br>
                                    <b>DVRPC Main Number:</b> (215) 592-1800</p>
                                </div>
                            </div><!-- /.tab-content -->
                        </div><!-- /.clearfix -->
                    </div><!-- /.modal-body -->
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
        <!-- end About Modal -->


        <div class="modal fade" id="count-modal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title white">Search by record number</h4>
                    </div>
                    <div class="modal-body">
                        <form id="recnum-form">
                        <p>Enter the DVRPC record number for counts which you would like to view. When entering more than one record number, values should be in a comma separated list.</p>
                        
                            <div class="form-group">
                                <label for="comment">Record numbers:</label>
                                <textarea class="form-control" rows="8" id="records"></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button id="rec-num-submit" class="btn btn-primary pull-right">Get Counts</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div>
        <!--Footer container-->
            <!--no footer included-->

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script type="text/javascript" src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
        <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/1.10.8/js/jquery.dataTables.min.js"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/1.10.8/js/dataTables.bootstrap.min.js"></script>
        
         <script type="text/javascript" src="lib/locals/esri.tasks.js"></script> 
        <script type="text/javascript" src="lib/assets/jquery.nouislider.min.js"></script>
        <script type="text/javascript" src="lib/dvrpc.draw.js"></script>
        <!-- <script type="text/javascript" src="lib/core/dyna-icons.js"></script> -->
        <script type="text/javascript" src="lib/typeahead.bundle.js"></script>
        <script type="text/javascript" src="lib/assets/numeral.min.js"></script>
        <script type="text/javascript" src="lib/assets/leaflet.label.js"></script>
        <script type="text/javascript" src="lib/papaparse.min.js"></script>
        <script type="text/javascript" src="lib/map.js"></script><!--customized mapping functions to load data -->
         <!-- Load Esri Leaflet from CDN -->
        <script src="//cdn.jsdelivr.net/leaflet.esri/1.0.0/esri-leaflet.js"></script>
    </body>
</html>